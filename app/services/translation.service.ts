import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';

const TRANSLATIONS: { [lang: string]: { [key: string]: string } } = {
    fr: {
        // Nav
        'nav.home': 'Accueil',
        'nav.reportages': 'Publi-Reportages',
        'nav.agroEchos': 'Agro-echos',
        'nav.contact': 'Contact',
        'nav.dashboard': 'Dashboard',
        'nav.logout': 'Déconnexion',
        'nav.search': 'Rechercher sur le site...',
        'nav.lang': 'EN',
        // Hero
        'hero.tag': 'Synergies Agroécologiques',
        'hero.title': "L'agroécologie pour une Afrique Souveraine",
        'hero.subtitle': "Des solutions adaptées aux contextes locaux pour une agriculture respectueuse de l'environnement et des populations",
        'hero.btnReports': 'Voir les reportages',
        'hero.btnNews': 'Actualités',
        // About
        'about.title': 'POURQUOI SYNERGIES AFRICA ?',
        'about.intro': "En Afrique, il est temps de poser un choix fondamental : voulons-nous confier notre avenir alimentaire à des semences industrielles, standardisées, importées et sous contrôle d'intérêts extérieurs, ou voulons-nous affirmer notre autonomie, notre résilience et notre dignité à travers les semences paysannes ?",
        'about.h1': 'La mémoire vivante de nos terroirs',
        'about.p1': "Ces semences, sélectionnées et transmises par des générations d'agriculteurs, ne sont pas de simples graines. Elles sont la mémoire vivante de nos terroirs, le fruit d'un savoir ancestral, et le socle de notre souveraineté alimentaire. Résilientes, adaptées à nos climats, elles offrent une réponse concrète aux défis du changement climatique et de l'insécurité alimentaire.",
        'about.h2': 'Face à un modèle destructeur',
        'about.p2': "Face à elles, l'agriculture industrielle impose un modèle destructeur : homogénéisation des variétés, appauvrissement des sols, dépendance aux intrants chimiques, et marginalisation des communautés rurales. Ce modèle est incompatible avec un développement durable et équitable sur notre continent.",
        'about.h3': "L'agroécologie comme alternative",
        'about.p3': "L'alternative existe. Elle est à notre portée. Elle s'appelle agroécologie. Bien plus qu'une méthode de culture, c'est une vision du monde. Elle valorise la biodiversité, restaure les écosystèmes, renforce les liens sociaux, et remet le paysan au centre du système alimentaire. L'agroécologie est une promesse : celle d'une Afrique capable de nourrir ses enfants sainement, durablement, et librement.",
        'about.h4': 'Une transition nécessaire',
        'about.p4': "Mais cette transition nécessite des choix politiques courageux. Il nous faut des politiques semencières justes et inclusives, construites avec et pour les communautés paysannes. Il nous faut créer des espaces de dialogue ouverts, transparents, entre paysans, chercheurs, institutions publiques et société civile. Il nous faut défendre et promouvoir les Systèmes Semenciers Paysans (SSP) comme piliers de notre résilience et de notre indépendance.",
        'about.h5': 'Défendre notre patrimoine',
        'about.p5': "En défendant nos semences, nous défendons bien plus qu'un patrimoine agricole. Nous défendons notre souveraineté politique, notre diversité culturelle, notre liberté de choisir comment et par qui nous voulons être nourris.",
        'about.h6': "Le temps d'agir",
        'about.p6': "Il est temps d'en faire une priorité. Il est temps de faire de l'agroécologie la règle, et non l'exception.",
        'about.cta': 'Ce choix, nous pouvons le faire. Ensemble. Maintenant.',
        // Reportage page
        'reportage.title': 'Publi-Reportages',
        'reportage.subtitle': "Découvrez les initiatives agroécologiques innovantes à travers l'Afrique de l'Ouest",
        'reportage.search': 'Rechercher un reportage...',
        'reportage.read': 'Lire le reportage',
        // Agro-echo page
        'agro.title': 'AGRO-ECHOS',
        'agro.subtitle': "L'actualité de l'agroécologie en Afrique de l'Ouest",
        'agro.search': 'Rechercher une actualité...',
        'agro.read': "Lire l'article",
        // Common filters
        'filter.recent': 'Récents',
        'filter.oldest': 'Anciens',
        'filter.az': 'A-Z',
        'filter.results': 'résultat(s)',
        'filter.reset': 'Réinitialiser',
        'filter.noResult': 'Aucun résultat pour',
        'filter.noReportage': 'Aucun reportage trouvé',
        'filter.noAgro': 'Aucune actualité trouvée',
        'filter.noReportageAvail': 'Aucun reportage disponible pour le moment.',
        'filter.noAgroAvail': 'Aucune actualité disponible pour le moment.',
        'filter.resetSearch': 'Réinitialiser la recherche',
        // Contact
        'contact.title': 'Contactez-nous',
        'contact.subtitle': 'Une question ou une suggestion? Votre avis compte et nous aide à améliorer continuellement votre expérience.',
        'contact.address': 'Notre adresse',
        'contact.phone': 'Téléphone',
        'contact.email': 'Email',
        'contact.hours': 'Horaires',
        'contact.hoursValue': 'Lundi - Vendredi: 9h - 17h',
        'contact.hoursSat': 'Samedi: 9h - 13h',
        'contact.follow': 'Suivez-nous',
        // Dashboard
        'dashboard.title': 'Tableau de bord',
        'dashboard.subtitle': 'Gérez vos reportages et actualités sur l\'agroécologie',
        'dashboard.add': 'Ajouter une publication',
        'dashboard.logout': 'Déconnexion',
        'dashboard.myPubs': 'Mes Publications',
        'dashboard.colTitle': 'Titre',
        'dashboard.colType': 'Type',
        'dashboard.colDate': 'Date',
        'dashboard.colActions': 'Actions',
        'dashboard.edit': 'Modifier',
        'dashboard.delete': 'Supprimer',
        'dashboard.noPubs': "Vous n'avez pas encore de publications.",
        'dashboard.totalPubs': 'Total Publications',
        'dashboard.reportages': 'Reportages',
        'dashboard.agroEchos': 'Agro-Échos',
        'dashboard.confirmDeleteTitle': 'Supprimer la publication',
        'dashboard.confirmDeleteMsg': 'Êtes-vous sûr de vouloir supprimer',
        'dashboard.irreversible': 'Cette action est irréversible.',
        'dashboard.cancel': 'Annuler',
        // Login
        'login.title': 'Connexion',
        'login.register': 'Inscription',
        'login.name': 'Nom complet',
        'login.email': 'Email',
        'login.pin': 'Code PIN',
        'login.loading': 'Chargement...',
        'login.submit': 'Se connecter',
        'login.submitRegister': "S'inscrire",
        'login.noAccount': 'Pas encore de compte ?',
        'login.hasAccount': 'Déjà un compte ?',
        // Create publication
        'create.new': 'Nouvelle Publication',
        'create.edit': 'Modifier Publication',
        'create.subtitle': 'Partagez vos initiatives agroécologiques avec la communauté',
        'create.generalInfo': 'Informations Générales',
        'create.titleLabel': 'Titre de la publication',
        'create.titlePlaceholder': 'Ex: Révolution verte à Korhogo',
        'create.type': 'Type de contenu',
        'create.typeSelect': 'Sélectionnez un type',
        'create.typeReportage': 'Publi-reportage',
        'create.typeAgro': 'Agro Echos',
        'create.date': 'Date de l\'événement',
        'create.location': 'Lieu / Région',
        'create.locationPlaceholder': "Ex: Côte d'Ivoire, Nord",
        'create.content': "Contenu de l'article",
        'create.summary': 'Résumé court',
        'create.summaryPlaceholder': 'Une brève introduction qui incite à la lecture...',
        'create.body': "Corps de l'article",
        'create.bodyPlaceholder': 'Racontez votre histoire en détail ici...',
        'create.media': 'Médias',
        'create.upload': 'Cliquez ou glissez-déposez des photos (max 4)',
        'create.uploadFormats': 'JPG, PNG ou WebP',
        'create.cancel': 'Annuler',
        'create.publish': "Publier l'article",
        'create.save': 'Enregistrer les modifications',
        'create.processing': 'Traitement...',
        'create.errTitle': 'Le titre est requis.',
        'create.errType': 'Le type de contenu est requis.',
        'create.errDate': 'La date est requise.',
        'create.errLocation': 'Le lieu est requis.',
        'create.errSummary': 'Le résumé est requis.',
        'create.errContent': "Le contenu de l'article est requis.",
        'create.errPhotoReq': 'Au moins une photo est requise.',
        'create.errPhotoMax': 'Maximum 4 photos autorisées.',
        // Detail page
        'detail.back': 'Retour',
        'detail.backToList': 'Retour à la liste',
        'detail.photos': 'Photos',
        'detail.category': 'Catégorie',
        'detail.eventDate': "Date de l'événement",
        'detail.location': 'Lieu',
        'detail.loading': 'Chargement de votre article...',
        'detail.error': 'Oups !',
        'detail.backHome': "Retour à l'accueil",
        'detail.agro': 'Agro Échos',
        'detail.reportage': 'Publi-reportage',
        'detail.views': 'vues',
        // Recent posts
        'recent.tag': 'Dernières Publications',
        'recent.title': 'Restez informé des actualités agroécologiques',
        'recent.subtitle': 'Découvrez les derniers reportages et actualités de notre communauté',
        'recent.allReports': 'Voir tous les reportages',
        'recent.allAgro': 'Voir tous les Agro-Échos',
        'recent.read': 'Lire',
        'recent.readMore': 'Lire la suite',
        'recent.loading': 'Chargement des publications...',
        'recent.empty': 'Aucune publication pour le moment',
        'recent.emptyDesc': 'Les publications apparaîtront ici dès qu\'elles seront ajoutées.',
        // Footer
        'footer.brand': 'Synergies Africa',
        'footer.brandDesc': "Promouvoir des pratiques agricoles durables en Afrique de l'Ouest",
        'footer.quicklinks': 'Liens rapides',
        'footer.contact': 'Contactez-nous',
        'footer.follow': 'Suivez-nous',
        'footer.copyright': '© 2025 Synergies Africa. Tous droits réservés.',
        'footer.privacy': 'Politique de confidentialité',
        // Shared
        'share.title': 'Partager',
        'share.facebook': 'Facebook',
        'share.whatsapp': 'WhatsApp',
        'share.twitter': 'Twitter',
        'share.copy': 'Copier le lien',
        'share.copied': 'Lien copié !',
        // Comments
        'comments.title': 'Commentaires',
        'comments.name': 'Votre nom',
        'comments.placeholder': 'Écrire un commentaire...',
        'comments.submit': 'Commenter',
        'comments.empty': 'Soyez le premier à commenter !',
        'comments.posting': 'Publication...',
        // 404
        'notfound.title': 'Page introuvable',
        'notfound.desc': "La page que vous cherchez n'existe pas ou a été déplacée.",
        'notfound.back': "Retour à l'accueil",
        // Logout dialog
        'logout.title': 'Déconnexion',
        'logout.msg': 'Êtes-vous sûr de vouloir vous déconnecter ?',
        'logout.cancel': 'Annuler',
        'logout.confirm': 'Se déconnecter',
        // Pagination
        'pagination.prev': 'Précédent',
        'pagination.next': 'Suivant',
        // Search
        'search.title': 'Résultats de recherche',
        'search.placeholder': 'Rechercher...',
        'search.noResults': 'Aucun résultat trouvé.',
        // Editor toolbar
        'editor.bold': 'Gras',
        'editor.italic': 'Italique',
        'editor.underline': 'Souligné',
        'editor.h2': 'Titre',
        'editor.h3': 'Sous-titre',
        'editor.ul': 'Liste',
        'editor.ol': 'Liste numérotée',
        'editor.quote': 'Citation',
    },
    en: {
        // Nav
        'nav.home': 'Home',
        'nav.reportages': 'Reports',
        'nav.agroEchos': 'Agro News',
        'nav.contact': 'Contact',
        'nav.dashboard': 'Dashboard',
        'nav.logout': 'Logout',
        'nav.search': 'Search the site...',
        'nav.lang': 'FR',
        // Hero
        'hero.tag': 'Agroecological Synergies',
        'hero.title': 'Agroecology for a Sovereign Africa',
        'hero.subtitle': 'Locally adapted solutions for agriculture that respects the environment and its people',
        'hero.btnReports': 'View reports',
        'hero.btnNews': 'News',
        // About
        'about.title': 'WHY SYNERGIES AFRICA?',
        'about.intro': "In Africa, it is time to make a fundamental choice: do we want to entrust our food future to industrial, standardized, imported seeds controlled by outside interests, or do we want to affirm our autonomy, resilience and dignity through peasant seeds?",
        'about.h1': 'The living memory of our lands',
        'about.p1': "These seeds, selected and passed down through generations of farmers, are not mere grains. They are the living memory of our lands, the fruit of ancestral knowledge, and the foundation of our food sovereignty. Resilient and adapted to our climates, they offer a concrete answer to the challenges of climate change and food insecurity.",
        'about.h2': 'Against a destructive model',
        'about.p2': "Against them, industrial agriculture imposes a destructive model: homogenization of varieties, soil depletion, dependence on chemical inputs, and marginalization of rural communities. This model is incompatible with sustainable and equitable development on our continent.",
        'about.h3': 'Agroecology as an alternative',
        'about.p3': "The alternative exists. It is within our reach. It is called agroecology. Much more than a farming method, it is a worldview. It values biodiversity, restores ecosystems, strengthens social bonds, and puts the farmer back at the center of the food system. Agroecology is a promise: that of an Africa capable of feeding its children healthily, sustainably, and freely.",
        'about.h4': 'A necessary transition',
        'about.p4': "But this transition requires courageous political choices. We need fair and inclusive seed policies, built with and for farming communities. We need to create open and transparent spaces for dialogue between farmers, researchers, public institutions and civil society. We must defend and promote Peasant Seed Systems (PSS) as pillars of our resilience and independence.",
        'about.h5': 'Defending our heritage',
        'about.p5': "By defending our seeds, we are defending much more than agricultural heritage. We are defending our political sovereignty, our cultural diversity, our freedom to choose how and by whom we want to be fed.",
        'about.h6': 'Time to act',
        'about.p6': "It is time to make this a priority. It is time to make agroecology the rule, not the exception.",
        'about.cta': 'This choice, we can make it. Together. Now.',
        // Reportage page
        'reportage.title': 'Reports',
        'reportage.subtitle': 'Discover innovative agroecological initiatives across West Africa',
        'reportage.search': 'Search a report...',
        'reportage.read': 'Read the report',
        // Agro-echo page
        'agro.title': 'AGRO NEWS',
        'agro.subtitle': 'Agroecology news in West Africa',
        'agro.search': 'Search news...',
        'agro.read': 'Read the article',
        // Common filters
        'filter.recent': 'Recent',
        'filter.oldest': 'Oldest',
        'filter.az': 'A-Z',
        'filter.results': 'result(s)',
        'filter.reset': 'Reset',
        'filter.noResult': 'No results for',
        'filter.noReportage': 'No report found',
        'filter.noAgro': 'No news found',
        'filter.noReportageAvail': 'No reports available at the moment.',
        'filter.noAgroAvail': 'No news available at the moment.',
        'filter.resetSearch': 'Reset search',
        // Contact
        'contact.title': 'Contact Us',
        'contact.subtitle': 'Have a question or suggestion? Your feedback helps us continuously improve your experience.',
        'contact.address': 'Our Address',
        'contact.phone': 'Phone',
        'contact.email': 'Email',
        'contact.hours': 'Hours',
        'contact.hoursValue': 'Monday - Friday: 9am - 5pm',
        'contact.hoursSat': 'Saturday: 9am - 1pm',
        'contact.follow': 'Follow us',
        // Dashboard
        'dashboard.title': 'Dashboard',
        'dashboard.subtitle': 'Manage your reports and news about agroecology',
        'dashboard.add': 'Add a publication',
        'dashboard.logout': 'Logout',
        'dashboard.myPubs': 'My Publications',
        'dashboard.colTitle': 'Title',
        'dashboard.colType': 'Type',
        'dashboard.colDate': 'Date',
        'dashboard.colActions': 'Actions',
        'dashboard.edit': 'Edit',
        'dashboard.delete': 'Delete',
        'dashboard.noPubs': 'You have no publications yet.',
        'dashboard.totalPubs': 'Total Publications',
        'dashboard.reportages': 'Reports',
        'dashboard.agroEchos': 'Agro News',
        'dashboard.confirmDeleteTitle': 'Delete publication',
        'dashboard.confirmDeleteMsg': 'Are you sure you want to delete',
        'dashboard.irreversible': 'This action is irreversible.',
        'dashboard.cancel': 'Cancel',
        // Login
        'login.title': 'Login',
        'login.register': 'Register',
        'login.name': 'Full name',
        'login.email': 'Email',
        'login.pin': 'PIN Code',
        'login.loading': 'Loading...',
        'login.submit': 'Sign in',
        'login.submitRegister': 'Sign up',
        'login.noAccount': 'No account yet?',
        'login.hasAccount': 'Already have an account?',
        // Create publication
        'create.new': 'New Publication',
        'create.edit': 'Edit Publication',
        'create.subtitle': 'Share your agroecological initiatives with the community',
        'create.generalInfo': 'General Information',
        'create.titleLabel': 'Publication title',
        'create.titlePlaceholder': 'E.g.: Green Revolution in Korhogo',
        'create.type': 'Content type',
        'create.typeSelect': 'Select a type',
        'create.typeReportage': 'Report',
        'create.typeAgro': 'Agro News',
        'create.date': 'Event date',
        'create.location': 'Location / Region',
        'create.locationPlaceholder': "E.g.: Ivory Coast, North",
        'create.content': 'Article content',
        'create.summary': 'Short summary',
        'create.summaryPlaceholder': 'A brief introduction that encourages reading...',
        'create.body': 'Article body',
        'create.bodyPlaceholder': 'Tell your story in detail here...',
        'create.media': 'Media',
        'create.upload': 'Click or drag & drop photos (max 4)',
        'create.uploadFormats': 'JPG, PNG or WebP',
        'create.cancel': 'Cancel',
        'create.publish': 'Publish article',
        'create.save': 'Save changes',
        'create.processing': 'Processing...',
        'create.errTitle': 'Title is required.',
        'create.errType': 'Content type is required.',
        'create.errDate': 'Date is required.',
        'create.errLocation': 'Location is required.',
        'create.errSummary': 'Summary is required.',
        'create.errContent': 'Article content is required.',
        'create.errPhotoReq': 'At least one photo is required.',
        'create.errPhotoMax': 'Maximum 4 photos allowed.',
        // Detail page
        'detail.back': 'Back',
        'detail.backToList': 'Back to list',
        'detail.photos': 'Photos',
        'detail.category': 'Category',
        'detail.eventDate': 'Event date',
        'detail.location': 'Location',
        'detail.loading': 'Loading your article...',
        'detail.error': 'Oops!',
        'detail.backHome': 'Back to home',
        'detail.agro': 'Agro News',
        'detail.reportage': 'Report',
        'detail.views': 'views',
        // Recent posts
        'recent.tag': 'Latest Publications',
        'recent.title': 'Stay informed about agroecological news',
        'recent.subtitle': 'Discover the latest reports and news from our community',
        'recent.allReports': 'View all reports',
        'recent.allAgro': 'View all Agro News',
        'recent.read': 'Read',
        'recent.readMore': 'Read more',
        'recent.loading': 'Loading publications...',
        'recent.empty': 'No publications yet',
        'recent.emptyDesc': 'Publications will appear here as soon as they are added.',
        // Footer
        'footer.brand': 'Synergies Africa',
        'footer.brandDesc': 'Promoting sustainable agricultural practices in West Africa',
        'footer.quicklinks': 'Quick Links',
        'footer.contact': 'Contact Us',
        'footer.follow': 'Follow Us',
        'footer.copyright': '© 2025 Synergies Africa. All rights reserved.',
        'footer.privacy': 'Privacy Policy',
        // Shared
        'share.title': 'Share',
        'share.facebook': 'Facebook',
        'share.whatsapp': 'WhatsApp',
        'share.twitter': 'Twitter',
        'share.copy': 'Copy link',
        'share.copied': 'Link copied!',
        // Comments
        'comments.title': 'Comments',
        'comments.name': 'Your name',
        'comments.placeholder': 'Write a comment...',
        'comments.submit': 'Comment',
        'comments.empty': 'Be the first to comment!',
        'comments.posting': 'Posting...',
        // 404
        'notfound.title': 'Page not found',
        'notfound.desc': 'The page you are looking for does not exist or has been moved.',
        'notfound.back': 'Back to home',
        // Logout dialog
        'logout.title': 'Logout',
        'logout.msg': 'Are you sure you want to log out?',
        'logout.cancel': 'Cancel',
        'logout.confirm': 'Log out',
        // Pagination
        'pagination.prev': 'Previous',
        'pagination.next': 'Next',
        // Search
        'search.title': 'Search Results',
        'search.placeholder': 'Search...',
        'search.noResults': 'No results found.',
        // Editor toolbar
        'editor.bold': 'Bold',
        'editor.italic': 'Italic',
        'editor.underline': 'Underline',
        'editor.h2': 'Heading',
        'editor.h3': 'Subheading',
        'editor.ul': 'List',
        'editor.ol': 'Numbered list',
        'editor.quote': 'Quote',
    }
};

@Injectable({ providedIn: 'root' })
export class TranslationService {
    private langSubject = new BehaviorSubject<string>(
        (typeof localStorage !== 'undefined' && localStorage.getItem('lang')) || 'fr'
    );
    public currentLang$ = this.langSubject.asObservable();

    get currentLang(): string {
        return this.langSubject.value;
    }

    setLanguage(lang: string): void {
        this.langSubject.next(lang);
        if (typeof localStorage !== 'undefined') {
            localStorage.setItem('lang', lang);
        }
    }

    toggleLanguage(): void {
        this.setLanguage(this.currentLang === 'fr' ? 'en' : 'fr');
    }

    translate(key: string): string {
        const lang = this.currentLang;
        const dict = TRANSLATIONS[lang];
        return (dict && dict[key]) || key;
    }
}
