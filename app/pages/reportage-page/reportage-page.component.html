<section class="page-header">
  <app-header-page [title]="'reportage.title' | translate"
    [subtitle]="'reportage.subtitle' | translate" />
</section>

<!-- Filter & Search Section -->
<section class="filter-section">
  <div class="container">
    <div class="filter-bar">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" [placeholder]="'reportage.search' | translate" [(ngModel)]="searchQuery" (input)="filterPublications()">
        <button *ngIf="searchQuery" class="clear-btn" (click)="clearSearch()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="filter-chips">
        <button class="chip" [class.active]="sortBy === 'recent'" (click)="setSortBy('recent')">
          <i class="fas fa-clock"></i> {{ 'filter.recent' | translate }}
        </button>
        <button class="chip" [class.active]="sortBy === 'oldest'" (click)="setSortBy('oldest')">
          <i class="fas fa-history"></i> {{ 'filter.oldest' | translate }}
        </button>
        <button class="chip" [class.active]="sortBy === 'alpha'" (click)="setSortBy('alpha')">
          <i class="fas fa-sort-alpha-down"></i> {{ 'filter.az' | translate }}
        </button>
      </div>
    </div>
    <div class="results-info" *ngIf="searchQuery || sortBy !== 'recent'">
      <span class="results-count">{{ filteredPublications.length }} {{ 'filter.results' | translate }}</span>
      <button class="reset-btn" (click)="resetFilters()">
        <i class="fas fa-undo"></i> {{ 'filter.reset' | translate }}
      </button>
    </div>
  </div>
</section>

<section class="reportages-list">
  <div class="container">
    <div class="mainContainer">
      <app-reportage-card *ngFor="let pub of paginatedPublications" [publication]="pub" />
      
      <!-- Pagination -->
      <app-pagination *ngIf="totalPages > 1"
        [currentPage]="currentPage"
        [totalPages]="totalPages"
        (pageChange)="onPageChange($event)" />

      <!-- Empty State -->
      <div *ngIf="filteredPublications.length === 0" class="empty-state">
        <div class="empty-icon">
          <i class="fas fa-search"></i>
        </div>
        <h3>{{ 'filter.noReportage' | translate }}</h3>
        <p *ngIf="searchQuery">{{ 'filter.noResult' | translate }} "{{ searchQuery }}"</p>
        <p *ngIf="!searchQuery">{{ 'filter.noReportageAvail' | translate }}</p>
        <button class="btn btn-primary" *ngIf="searchQuery" (click)="resetFilters()">
          <i class="fas fa-undo"></i> {{ 'filter.resetSearch' | translate }}
        </button>
      </div>
    </div>
  </div>
</section>
